/*
 * TEST UNITARIO: LCD 1602A (I2C)
 * * Conexiones (Arduino UNO/Nano):
 * SDA -> A4
 * SCL -> A5
 * VCC -> 5V
 * GND -> GND
 */

#include <Wire.h> 
#include <LiquidCrystal_I2C.h>

// DIRECCIÓN I2C:
// Por defecto suele ser 0x27. Si no funciona, prueba con 0x3F.
LiquidCrystal_I2C lcd(0x27, 16, 2);  

void setup() {
  // 1. Inicializar la comunicación con la LCD
  lcd.init();
  
  // 2. Encender la luz de fondo
  lcd.backlight();
  
  // 3. Prueba de mensaje de inicio
  lcd.setCursor(0, 0); // Columna 0, Fila 0
  lcd.print("TEST INICIADO...");
  delay(2000);
  lcd.clear();
}

void loop() {
  // --- PRUEBA 1: Escribir en ambas filas ---
  lcd.clear();
  lcd.setCursor(0, 0); 
  lcd.print("Fila 1: OK");
  
  lcd.setCursor(0, 1); // Columna 0, Fila 1
  lcd.print("Fila 2: OK");
  delay(2000);

  // --- PRUEBA 2: Parpadeo de luz de fondo (Backlight) ---
  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("Test Backlight");
  
  for(int i = 0; i < 3; i++) {
    lcd.noBacklight(); // Apagar luz
    delay(500);
    lcd.backlight();   // Encender luz
    delay(500);
  }

  // --- PRUEBA 3: Contador dinámico (Simula datos de sensores) ---
  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("Contador Test:");
  
  for (int i = 0; i <= 5; i++) {
    lcd.setCursor(0, 1);
    lcd.print("Valor: ");
    lcd.print(i);
    delay(500);
  }

  // --- FIN DEL CICLO ---
  lcd.clear();
  lcd.print("TEST COMPLETO");
  delay(2000);
}
